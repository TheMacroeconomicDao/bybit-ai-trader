# üîß FIX TELEGRAM ENGLISH OUTPUT & REMOVE EXCESSIVE SEPARATORS

## üéØ –¶–ï–õ–¨

–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–æ—Å—Ç–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ Telegram –≥—Ä—É–ø–ø—ã. –ù—É–∂–Ω–æ:
1. ‚úÖ **–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ**
2. ‚úÖ **–£–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ "‚îÅ" (–æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç 2 —Ä—è–¥–∞ –≤ Telegram)**

---

## üìã –ê–ù–ê–õ–ò–ó –§–õ–û–£

### üîç –ü–û–õ–ù–´–ô –§–õ–û–£ –ì–ï–ù–ï–†–ê–¶–ò–ò –ò –û–¢–ü–†–ê–í–ö–ò –°–û–û–ë–©–ï–ù–ò–ô

```
1. –ó–ê–ü–£–°–ö –ê–ì–ï–ù–¢–ê
   ‚îî‚îÄ autonomous_agent/main.py::main()
      ‚îî‚îÄ analyzer.analyze_market()
         ‚îî‚îÄ autonomous_agent/autonomous_analyzer.py
            ‚îî‚îÄ qwen_client.analyze_market_opportunities()
               ‚îî‚îÄ autonomous_agent/qwen_client.py
                  ‚îî‚îÄ –ü–†–û–ú–ü–¢–´ –ù–ê –†–£–°–°–ö–û–ú (—Å—Ç—Ä–æ–∫–∏ 211-260)
                     ‚îî‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON —Å reasoning –Ω–∞ —Ä—É—Å—Å–∫–æ–º

2. –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï
   ‚îî‚îÄ formatter.format_top_opportunities(result)
      ‚îî‚îÄ autonomous_agent/telegram_formatter.py::format_top_opportunities()
         ‚îî‚îÄ DetailedFormatter.format_full_report()
            ‚îî‚îÄ autonomous_agent/detailed_formatter.py::format_full_report()
               ‚îî‚îÄ –í–°–ï –¢–ï–ö–°–¢–´ –ù–ê –†–£–°–°–ö–û–ú (—Å—Ç—Ä–æ–∫–∏ 40, 52, 55, 62, 75, 78, 88, 94, 124, 127, 130)
               ‚îî‚îÄ –†–ê–ó–î–ï–õ–ò–¢–ï–õ–ò "‚îÅ" * 50 (—Å—Ç—Ä–æ–∫–∏ 41, 57, 63, 85, 95, 129)

3. –û–¢–ü–†–ê–í–ö–ê
   ‚îî‚îÄ publish_to_telegram()
      ‚îî‚îÄ autonomous_agent/main.py::publish_to_telegram()
         ‚îî‚îÄ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram –≥—Ä—É–ø–ø—ã
```

---

## üîé –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. `autonomous_agent/detailed_formatter.py`
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –í—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- ‚ùå –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ `"‚îÅ" * 50` –∑–∞–Ω–∏–º–∞—é—Ç –º–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (2 —Ä—è–¥–∞ –≤ Telegram)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
- ‚úÖ –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å `"‚îÅ" * 50` –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"‚îÄ" * 30` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `"\n"`)

**–°—Ç—Ä–æ–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°—Ç—Ä–æ–∫–∞ 40: `"üîç INSTITUTIONAL MARKET ANALYSIS\n\n"`
- –°—Ç—Ä–æ–∫–∞ 41: `message += "‚îÅ" * 50 + "\n\n"`
- –°—Ç—Ä–æ–∫–∞ 52: `f"üìä MARKET REGIME: {regime_type} ({confidence:.0%})\n"`
- –°—Ç—Ä–æ–∫–∞ 55: `f"üéØ THRESHOLDS: LONG {thresholds.get('long', 7.0):.1f}/10 | SHORT {thresholds.get('short', 7.0):.1f}/10\n"`
- –°—Ç—Ä–æ–∫–∞ 57: `message += "\n" + "‚îÅ" * 50 + "\n\n"`
- –°—Ç—Ä–æ–∫–∞ 62: `btc_status = btc_analysis.get("status", "neutral")`
- –°—Ç—Ä–æ–∫–∞ 63: `message += "‚îÅ" * 50 + "\n\n"`
- –°—Ç—Ä–æ–∫–∞ 75: `message += "TOP OPPORTUNITIES\n\n"`
- –°—Ç—Ä–æ–∫–∞ 78: `message += f"üìà LONG (Top 3 of {len(all_longs)}):\n\n"`
- –°—Ç—Ä–æ–∫–∞ 83: `message += "No opportunities found.\n\n"`
- –°—Ç—Ä–æ–∫–∞ 85: `message += "‚îÅ" * 50 + "\n\n"`
- –°—Ç—Ä–æ–∫–∞ 88: `message += f"üìâ SHORT (Top 3 of {len(all_shorts)}):\n\n"`
- –°—Ç—Ä–æ–∫–∞ 93: `message += "No opportunities found.\n\n"`
- –°—Ç—Ä–æ–∫–∞ 95: `message += "‚îÅ" * 50 + "\n\n"`
- –°—Ç—Ä–æ–∫–∞ 124: `message += f"üìä STATS: {total_scanned} scanned | {longs_found} LONG | {shorts_found} SHORT | {passed_zero_risk} elite (‚â•8.0)\n"`
- –°—Ç—Ä–æ–∫–∞ 127: `message += "\n‚ö†Ô∏è NO ELITE OPPORTUNITIES (‚â•8.0/10) - Wait for better setups!\n"`
- –°—Ç—Ä–æ–∫–∞ 129: `message += "\n" + "‚îÅ" * 50 + "\n"`
- –°—Ç—Ä–æ–∫–∞ 130: `message += "Next scan: 12h | System: INSTITUTIONAL v3.0"`

### 2. `autonomous_agent/telegram_formatter.py`
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –¢–µ–∫—Å—Ç—ã –æ—à–∏–±–æ–∫ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**–°—Ç—Ä–æ–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°—Ç—Ä–æ–∫–∞ 27: `return "‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."`
- –°—Ç—Ä–æ–∫–∞ 74: `message += f"üìà –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: {probability*100:.0f}%\n\n"`
- –°—Ç—Ä–æ–∫–∞ 78: `message += "üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:\n"`
- –°—Ç—Ä–æ–∫–∞ 85: `message += f"üí° –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:\n{reasoning}\n\n"`
- –°—Ç—Ä–æ–∫–∞ 90: `message += f"‚è∞ –¢–∞–π–º—Ñ—Ä–µ–π–º—ã: {', '.join(timeframes)}\n"`
- –°—Ç—Ä–æ–∫–∞ 134: `return f"‚ùå –û—à–∏–±–∫–∞: {error}\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏."`

### 3. `autonomous_agent/qwen_client.py` (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ü—Ä–æ–º–ø—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º (—Å—Ç—Ä–æ–∫–∏ 211-260)
- ‚ùå –ü—Ä–∏–º–µ—Ä—ã JSON —Å reasoning –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ Qwen –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç reasoning –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –Ω—É–∂–Ω–æ –ª–∏–±–æ:
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- –ò–õ–ò –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ reasoning –≤ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–µ

---

## ‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–ê–ì 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å `detailed_formatter.py`
1. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
2. –ó–∞–º–µ–Ω–∏—Ç—å `"‚îÅ" * 50` –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏:
   - –í–∞—Ä–∏–∞–Ω—Ç 1: `"‚îÄ" * 30` (–∫–æ—Ä–æ—Ç–∫–∞—è –ª–∏–Ω–∏—è, 30 —Å–∏–º–≤–æ–ª–æ–≤)
   - –í–∞—Ä–∏–∞–Ω—Ç 2: `"\n"` (–ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)
   - –í–∞—Ä–∏–∞–Ω—Ç 3: `"‚îÄ" * 20` (–µ—â–µ –∫–æ—Ä–æ—á–µ)

### –®–ê–ì 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å `telegram_formatter.py`
1. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `_format_single_opportunity` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - –ø–µ—Ä–µ–≤–µ—Å—Ç–∏)

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å reasoning –æ—Ç Qwen
1. –ï—Å–ª–∏ reasoning –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏–∑ Qwen - –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
2. –ò–õ–ò –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –≤ `qwen_client.py` –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π

### –®–ê–ì 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –∞–≥–µ–Ω—Ç
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ:
   - ‚úÖ –í—Å–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
   - ‚úÖ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∫–æ—Ä–æ—Ç–∫–∏–µ (–Ω–µ –∑–∞–Ω–∏–º–∞—é—Ç 2 —Ä—è–¥–∞)

---

## üìù –ü–†–ò–ú–ï–†–´ –ò–ó–ú–ï–ù–ï–ù–ò–ô

### –ë–´–õ–û (detailed_formatter.py):
```python
message = "üîç INSTITUTIONAL MARKET ANALYSIS\n\n"
message += "‚îÅ" * 50 + "\n\n"
message += f"üìä MARKET REGIME: {regime_type} ({confidence:.0%})\n"
message += "\n" + "‚îÅ" * 50 + "\n\n"
message += "TOP OPPORTUNITIES\n\n"
message += f"üìà LONG (Top 3 of {len(all_longs)}):\n\n"
message += "‚îÅ" * 50 + "\n\n"
```

### –°–¢–ê–õ–û:
```python
message = "üîç INSTITUTIONAL MARKET ANALYSIS\n\n"
message += "‚îÄ" * 30 + "\n\n"  # –ö–æ—Ä–æ—Ç–∫–∏–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
message += f"üìä MARKET REGIME: {regime_type} ({confidence:.0%})\n"
message += "\n" + "‚îÄ" * 30 + "\n\n"  # –ö–æ—Ä–æ—Ç–∫–∏–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
message += "TOP OPPORTUNITIES\n\n"
message += f"üìà LONG (Top 3 of {len(all_longs)}):\n\n"
message += "‚îÄ" * 30 + "\n\n"  # –ö–æ—Ä–æ—Ç–∫–∏–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
```

### –ë–´–õ–û (telegram_formatter.py):
```python
return "‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
message += f"üìà –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: {probability*100:.0f}%\n\n"
message += "üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:\n"
message += f"üí° –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:\n{reasoning}\n\n"
message += f"‚è∞ –¢–∞–π–º—Ñ—Ä–µ–π–º—ã: {', '.join(timeframes)}\n"
```

### –°–¢–ê–õ–û:
```python
return "‚ùå Market analysis error. Please try again later."
message += f"üìà Probability: {probability*100:.0f}%\n\n"
message += "üîë Key Factors:\n"
message += f"üí° Reasoning:\n{reasoning}\n\n"
message += f"‚è∞ Timeframes: {', '.join(timeframes)}\n"
```

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–°–¢–ê –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–∫–∂–µ:
1. `autonomous_agent/autonomous_analyzer.py` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 220-252)
   - –ï—Å–ª–∏ —Ç–∞–º –µ—Å—Ç—å —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –ø–µ—Ä–µ–≤–µ—Å—Ç–∏
   
2. `publish_market_analysis.py` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ `"‚îÅ" * 40`

3. –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **–ù–µ –ª–æ–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤ –∏ –∑–∞–º–µ–Ω–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É** - —ç–º–æ–¥–∑–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—é—Ç—Å—è
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å reasoning** - –µ—Å–ª–∏ Qwen –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∫–æ—Ä–æ—Ç–∫–∏–µ (–Ω–µ –∑–∞–Ω–∏–º–∞—é—Ç 2 —Ä—è–¥–∞)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –≠–º–æ–¥–∑–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ

---

## üìå –§–ê–ô–õ–´ –î–õ–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø

1. ‚úÖ `autonomous_agent/detailed_formatter.py` - –û–°–ù–û–í–ù–û–ô (–≤—Å–µ —Ç–µ–∫—Å—Ç—ã + —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏)
2. ‚úÖ `autonomous_agent/telegram_formatter.py` - –æ—à–∏–±–∫–∏ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã
3. ‚ö†Ô∏è `autonomous_agent/qwen_client.py` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–µ—Å–ª–∏ reasoning –Ω–∞ —Ä—É—Å—Å–∫–æ–º)
4. ‚ö†Ô∏è `autonomous_agent/autonomous_analyzer.py` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

---

**–ì–û–¢–û–í–û –ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ!** üöÄ
