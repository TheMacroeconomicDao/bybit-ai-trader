# ‚úÖ –°–í–û–î–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ê–ù–ê–õ–ò–ó–ê –†–´–ù–ö–ê

**–î–∞—Ç–∞:** 2025-11-22  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–´

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚úÖ `find_breakout_opportunities` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ scoring

**–§–∞–π–ª:** `mcp_server/market_scanner.py:904-1003`

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ BTC trend –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º (—Å—Ç—Ä–æ–∫–∏ 922-927)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ account balance –¥–ª—è entry plan (—Å—Ç—Ä–æ–∫–∏ 929-938)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `_calculate_opportunity_score` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Å—Ç—Ä–æ–∫–∞ 971):
  ```python
  score_data = self._calculate_opportunity_score(analysis, ticker, btc_trend, entry_plan)
  ```
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è entry_plan –ø–µ—Ä–µ–¥ scoring (—Å—Ç—Ä–æ–∫–∞ 968)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã score_breakdown –∏ probability –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Ç—Ä–æ–∫–∏ 980-981)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç score –¥–ª—è breakout opportunities.

---

### 2. ‚úÖ `get_volume_profile` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª:** `mcp_server/volume_profile.py:63-72`

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –Ø–≤–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è bool –≤ JSON-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Ç–∏–ø (—Å—Ç—Ä–æ–∫–∞ 71):
  ```python
  "confluence_with_poc": bool(confluence_with_poc),  # –Ø–≤–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ bool
  ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON.

---

### 3. ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `mcp_server/full_server.py:888-960`

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω try-except –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
  - `scan_market` (—Å—Ç—Ä–æ–∫–∏ 889-904)
  - `find_oversold_assets` (—Å—Ç—Ä–æ–∫–∏ 906-918)
  - `find_overbought_assets` (—Å—Ç—Ä–æ–∫–∏ 920-932)
  - `find_breakout_opportunities` (—Å—Ç—Ä–æ–∫–∏ 934-946)
  - `find_trend_reversals` (—Å—Ç—Ä–æ–∫–∏ 948-960)

- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:
  ```python
  {
      "success": False,
      "error": str(e),
      "opportunities": []
  }
  ```

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º traceback:
  ```python
  logger.error(f"Error in {function_name}: {e}", exc_info=True)
  ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–æ—Å—Ç–æ "Tool Errored", –∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ.

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 3
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 3
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~100
- **–û—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞:** 0 ‚úÖ

---

## ‚ö†Ô∏è –ù–ï –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –§–æ—Ä–º–∞—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è bybit-analysis MCP

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏–∏ `get_market_structure`, `get_ml_rsi`, `get_order_blocks` (Node.js MCP) –æ–∂–∏–¥–∞—é—Ç —á–∏—Å–ª–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã.

**–°—Ç–∞—Ç—É—Å:** üü° –ù–ï –ö–†–ò–¢–ò–ß–ù–û - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–∑–æ–≤–∞, –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:
- `"1h"` ‚Üí `"60"`
- `"4h"` ‚Üí `"240"`
- `"1d"` ‚Üí `"D"`
- `"15m"` ‚Üí `"15"`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å helper-—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).

---

## üß™ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –¢–µ—Å—Ç scan_market
result = await scan_market(
    criteria={"min_score": 7, "side": "long"},
    limit=10
)
assert "opportunities" in result
assert "error" not in result or result["error"] is None

# –¢–µ—Å—Ç find_oversold_assets
result = await find_oversold_assets(
    market_type="spot",
    min_volume_24h=1000000
)
assert isinstance(result, list) or ("error" in result and "opportunities" in result)

# –¢–µ—Å—Ç find_breakout_opportunities
result = await find_breakout_opportunities(
    market_type="spot",
    min_volume_24h=1000000
)
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ score —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
if result and len(result) > 0:
    assert "score" in result[0]
    assert "score_breakdown" in result[0]
    assert "probability" in result[0]
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

```python
# –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
try:
    result = await scan_market(
        criteria={"invalid": "parameter"},
        limit=10
    )
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
    assert "error" in result
    assert result["success"] == False
    assert "opportunities" in result
except Exception as e:
    # –û—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∞
    pass
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_volume_profile

```python
result = await get_volume_profile(
    symbol="BTC/USDT",
    timeframe="1h"
)
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
assert "error" not in result
assert "confluence_with_poc" in result
assert isinstance(result["confluence_with_poc"], bool)
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. ‚úÖ `scan_market` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
2. ‚úÖ `find_oversold_assets` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
3. ‚úÖ `find_overbought_assets` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
4. ‚úÖ `find_breakout_opportunities` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ scoring
5. ‚úÖ `find_trend_reversals` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
6. ‚úÖ `get_volume_profile` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é** volume_profile
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å scoring** –≤ find_breakout_opportunities
5. **–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

---

*–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.* ‚úÖ









