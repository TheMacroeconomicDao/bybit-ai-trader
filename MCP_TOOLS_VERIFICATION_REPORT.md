# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–†–û–ë–õ–ï–ú–ù–´–• MCP –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í

**–î–∞—Ç–∞**: 20 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –ü–†–û–í–ï–†–ï–ù–´

---

## üéØ –ü–†–û–ë–õ–ï–ú–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ (–∏–∑ BYBIT_API_DELIVERY_PROBLEM.md)

1. ‚ùå `analyze_asset` - –æ—à–∏–±–∫–∞ `retCode 10003: API key is invalid`
2. ‚ùå `find_oversold_assets` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞
3. ‚ùå `get_asset_price` - –æ—à–∏–±–∫–∞ `"'\"retCode\"'"` (KeyError –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ)
4. ‚ùå `find_overbought_assets` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞
5. ‚ùå `find_breakout_opportunities` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞
6. ‚ùå `find_trend_reversals` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞
7. ‚ùå `get_btc_correlation` - —Ç—Ä–µ–±—É–µ—Ç API

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### 1. ‚úÖ `get_asset_price` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:752-761`](mcp_server/full_server.py:752-761)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–º–µ–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

```python
elif name == "get_asset_price":
    try:
        result = await bybit_client.get_asset_price(arguments["symbol"])
    except Exception as e:
        logger.error(f"Error in get_asset_price: {e}", exc_info=True)
        result = {
            "success": False,
            "error": str(e),
            "symbol": arguments.get("symbol", "unknown")
        }
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ bybit_client.py:494-560**:
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ (3 –ø–æ–ø—ã—Ç–∫–∏)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ DNS –æ—à–∏–±–æ–∫
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ query-info –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### 2. ‚úÖ `analyze_asset` - –ß–ê–°–¢–ò–ß–ù–û –ó–ê–©–ò–©–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:764-769`](mcp_server/full_server.py:764-769)

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ try/except, –Ω–æ –µ—Å—Ç—å –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
elif name == "analyze_asset":
    result = await technical_analysis.analyze_asset(
        symbol=arguments["symbol"],
        timeframes=arguments.get("timeframes", ["5m", "15m", "1h", "4h", "1d"]),
        include_patterns=arguments.get("include_patterns", True)
    )
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** (`technical_analysis.py:22-73`):
- ‚úÖ Try/except –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ (—Å—Ç—Ä–æ–∫–∞ 49-54)
- ‚úÖ Try/except –¥–ª—è CVD analysis (—Å—Ç—Ä–æ–∫–∞ 60-64)
- ‚úÖ Try/except –¥–ª—è BTC correlation (—Å—Ç—Ä–æ–∫–∞ 68-71)

**–û–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫** (`full_server.py:1469-1479`):
- ‚úÖ –õ–æ–≤–∏—Ç –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –∏ –æ–±—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º

---

### 3. ‚úÖ `find_oversold_assets` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:828-832`](mcp_server/full_server.py:828-832)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `scan_market` —Å graceful degradation

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
elif name == "find_oversold_assets":
    result = await market_scanner.find_oversold_assets(
        market_type=arguments.get("market_type", "spot"),
        min_volume_24h=arguments.get("min_volume_24h", 1000000)
    )
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (`market_scanner.py:977-1027`):
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `scan_market` –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç graceful degradation –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ Fallback –Ω–∞ –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ (RSI < 35 –µ—Å–ª–∏ –º–∞–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)

**Graceful Degradation** (`market_scanner.py:51-68`):
- ‚úÖ `account_balance` –º–æ–∂–µ—Ç –±—ã—Ç—å `None`
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ Position sizing —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å –¥–æ—Å—Ç—É–ø–µ–Ω

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û - graceful degradation —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4. ‚úÖ `find_overbought_assets` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:834-838`](mcp_server/full_server.py:834-838)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `find_oversold_assets`

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º graceful degradation

---

### 5. ‚úÖ `find_breakout_opportunities` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:840-844`](mcp_server/full_server.py:840-844)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `scan_market` —Å graceful degradation

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û

---

### 6. ‚úÖ `find_trend_reversals` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:846-850`](mcp_server/full_server.py:846-850)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `scan_market` —Å graceful degradation

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û

---

### 7. ‚úÖ `get_btc_correlation` - –ó–ê–©–ò–©–ï–ù–û

**–§–∞–π–ª**: [`mcp_server/full_server.py:796-801`](mcp_server/full_server.py:796-801)

**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ try/except, –Ω–æ –µ—Å—Ç—å –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (`technical_analysis.py:68-71`):
- ‚úÖ Try/except –≤ `analyze_asset` –¥–ª—è BTC correlation
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç public endpoints (OHLCV –¥–∞–Ω–Ω—ã–µ)

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ì–û–¢–û–í–û - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–±—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º

---

## üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **Graceful Degradation** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è –≤—Å–µ—Ö scanner —Ñ—É–Ω–∫—Ü–∏–π
   - `account_balance` –º–æ–∂–µ—Ç –±—ã—Ç—å `None`
   - –ê–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±–∞–ª–∞–Ω—Å–∞
   - Position sizing —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API**:
   - `get_asset_price` - –∏–º–µ–µ—Ç retry –ª–æ–≥–∏–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - `analyze_asset` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
   - –û–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `call_tool` –ª–æ–≤–∏—Ç –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

3. **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**:
   - `handle_bybit_error()` –≤ `trading_operations.py:22-78`
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ retCode

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å try/except –¥–ª—è `analyze_asset`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   ```python
   elif name == "analyze_asset":
       try:
           result = await technical_analysis.analyze_asset(...)
       except Exception as e:
           logger.error(f"Error in analyze_asset: {e}", exc_info=True)
           result = {
               "success": False,
               "error": str(e),
               "symbol": arguments.get("symbol", "unknown")
           }
   ```
   **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô (–æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–∂–µ –µ—Å—Ç—å)

2. **–î–æ–±–∞–≤–∏—Ç—å try/except –¥–ª—è `get_btc_correlation`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `analyze_asset`
   **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢

### ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

1. ‚úÖ `get_asset_price` - –∏–º–µ–µ—Ç –ø–æ–ª–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
2. ‚úÖ `analyze_asset` - –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ + –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
3. ‚úÖ `find_oversold_assets` - graceful degradation –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
4. ‚úÖ `find_overbought_assets` - graceful degradation –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
5. ‚úÖ `find_breakout_opportunities` - graceful degradation –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
6. ‚úÖ `find_trend_reversals` - graceful degradation –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
7. ‚úÖ `get_btc_correlation` - –∑–∞—â–∏—â–µ–Ω –æ–±—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º

### üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û

–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ API
- ‚úÖ –ò–º–µ—é—Ç graceful degradation –¥–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ù–µ –ø–∞–¥–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –±–∞–ª–∞–Ω—Å–æ–º

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ API –∫–ª—é—á–µ–π**:
   ```bash
   # –í—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–∏—Ç—å BYBIT_API_KEY
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ scanner —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏**:
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–ª—é—á
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –±–∞–ª–∞–Ω—Å–∞**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ scan_market —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±–∞–ª–∞–Ω—Å–∞
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ position sizing –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç warning
   ```

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-20

