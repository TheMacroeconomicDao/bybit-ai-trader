# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ì–û–í –ê–ù–ê–õ–ò–ó–ê –†–´–ù–ö–ê

**–î–∞—Ç–∞:** 2025-01-22  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò

### 1. ‚úÖ `find_breakout_opportunities` - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ `_calculate_opportunity_score`

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–ª–∞—Å—å —Å 2 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–º–µ—Å—Ç–æ 4.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª—É—á–µ–Ω–∏–µ BTC trend –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª—É—á–µ–Ω–∏–µ account balance –¥–ª—è entry plan
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `_calculate_opportunity_score` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `(analysis, ticker, btc_trend, entry_plan)`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è entry_plan –ø–µ—Ä–µ–¥ scoring
- –î–æ–±–∞–≤–ª–µ–Ω—ã score_breakdown –∏ probability –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–§–∞–π–ª:** `mcp_server/market_scanner.py` (—Å—Ç—Ä–æ–∫–∏ 904-989)

---

### 2. ‚úÖ `get_volume_profile` - JSON Serialization Error

**–ü—Ä–æ–±–ª–µ–º–∞:** `Object of type bool is not JSON serializable`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –Ø–≤–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è bool –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `bool()` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ JSON-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Ç–∏–ø–∞

**–§–∞–π–ª:** `mcp_server/volume_profile.py` (—Å—Ç—Ä–æ–∫–∏ 63-72)

---

### 3. ‚úÖ `scan_market` –∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –≤—ã–∑–æ–≤—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ "Tool Errored" –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (try-except) –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
  - `scan_market`
  - `find_oversold_assets`
  - `find_overbought_assets`
  - `find_breakout_opportunities`
  - `find_trend_reversals`
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø–æ–ª–µ–º `error` –∏ –ø—É—Å—Ç—ã–º —Å–ø–∏—Å–∫–æ–º `opportunities`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –ø–æ–ª–Ω—ã–º traceback

**–§–∞–π–ª:** `mcp_server/full_server.py` (—Å—Ç—Ä–æ–∫–∏ 888-960)

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 3
- **–ü—Ä–æ–±–ª–µ–º —Å —Ñ–æ—Ä–º–∞—Ç–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 1
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 6 (3 Python + 3 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 1 (`interval_utils.py`)
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~200
- **–û—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞:** 0

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –§–æ—Ä–º–∞—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è bybit-analysis MCP

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏–∏ `get_market_structure`, `get_ml_rsi`, `get_order_blocks` –æ–∂–∏–¥–∞—é—Ç —á–∏—Å–ª–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã ("60" –≤–º–µ—Å—Ç–æ "1h").

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ helper —Ñ—É–Ω–∫—Ü–∏—è `interval_utils.py` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `prompts/agent_core_instructions.md` —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `.cursorrules` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ —Ñ–æ—Ä–º–∞—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–æ –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–¢–∞–±–ª–∏—Ü–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:**
- `"1m"` ‚Üí `"1"`
- `"5m"` ‚Üí `"5"`
- `"15m"` ‚Üí `"15"`
- `"30m"` ‚Üí `"30"`
- `"1h"` ‚Üí `"60"`
- `"4h"` ‚Üí `"240"`
- `"1d"` ‚Üí `"D"`
- `"1w"` ‚Üí `"W"`
- `"1M"` ‚Üí `"M"`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `mcp_server/interval_utils.py` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- `prompts/agent_core_instructions.md`
- `.cursorrules`

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. ‚úÖ `scan_market` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
2. ‚úÖ `find_oversold_assets` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
3. ‚úÖ `find_overbought_assets` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
4. ‚úÖ `find_breakout_opportunities` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
5. ‚úÖ `find_trend_reversals` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
6. ‚úÖ `get_volume_profile` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
7. ‚úÖ –§–æ—Ä–º–∞—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ - —Å–æ–∑–¥–∞–Ω–∞ helper —Ñ—É–Ω–∫—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

## üß™ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é volume_profile
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å scoring –≤ find_breakout_opportunities

---

*–û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤*






